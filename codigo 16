-- Los usuarios pueden ver solo su propia información
CREATE POLICY "usuarios_select_own" ON usuarios
  FOR SELECT USING (auth.uid() = id);

-- Los administradores pueden ver todos los usuarios
CREATE POLICY "usuarios_select_admin" ON usuarios
  FOR SELECT USING (
    EXISTS (SELECT 1 FROM usuarios WHERE id = auth.uid() AND is_admin = true)
  );

-- Los usuarios pueden actualizar solo su propia información
CREATE POLICY "usuarios_update_own" ON usuarios
  FOR UPDATE USING (auth.uid() = id);
